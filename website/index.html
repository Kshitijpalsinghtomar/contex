<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contex — Intelligent Context Engine for LLMs</title>
  <meta name="description"
    content="Contex stores structured data as canonical IR (TENS) and serves it in the most token-efficient format for any LLM — saving 40-94% of context costs.">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="./style.css">
  <script>
    const theme = localStorage.getItem('contex-theme') || 'dark';
    document.documentElement.setAttribute('data-theme', theme);
  </script>
</head>

<body>

  <!-- Navigation -->
  <nav class="nav">
    <a href="/" class="nav-brand">
      <div class="logo-icon">C</div>
      Contex
    </a>
    <ul class="nav-links">
      <li><a href="/" class="active">Home</a></li>
      <li><a href="./docs.html">Docs</a></li>
      <li><a href="./tens-text.html">TENS-Text</a></li>
      <li><a href="./benchmarks.html">Benchmarks</a></li>
      <li><a href="./playground.html">Playground</a></li>
      <li><a href="./vision.html">Vision</a></li>
      <li><a href="./dashboard.html">Dashboard</a></li>
    </ul>
    <div class="nav-actions">
      <button class="btn btn-ghost btn-sm" id="theme-toggle" aria-label="Toggle theme">
        <svg class="sun-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
      <a href="https://github.com/kshitijpalsinghtomar/contex" class="btn btn-ghost btn-sm" target="_blank">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
          <path
            d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
          </path>
        </svg>
        GitHub
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-content">
      <div class="hero-badge">
        <span class="dot"></span>
        <span>v3.0 · Canonical IR · Deterministic</span>
      </div>

      <h1>The Intelligent<br>Context Engine</h1>

      <p>Contex stores structured data as a canonical intermediate representation (TENS) and serves it in the most
        token-efficient format for any LLM — saving <strong>40-94% of context costs</strong> with deterministic output
        for prefix caching.</p>

      <div class="hero-actions">
        <a href="./docs.html" class="btn btn-primary">Get Started</a>
        <a href="./benchmarks.html" class="btn btn-ghost">View Benchmarks</a>
      </div>

      <div class="install-cmd" id="installCmd" title="Click to copy">
        <span class="prefix">$</span>
        <span>pnpm add @contex/core @contex/engine @contex/middleware</span>
        <svg class="copy-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 12px; opacity: 0.6;">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <div class="container">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" style="-webkit-text-fill-color: var(--accent-blue); color: var(--accent-blue);">43%</div>
        <div class="stat-label">Avg Pipeline Savings</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" style="-webkit-text-fill-color: var(--accent-green); color: var(--accent-green);">94%</div>
        <div class="stat-label">Best Format Savings</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" style="-webkit-text-fill-color: var(--accent-purple); color: var(--accent-purple);">3</div>
        <div class="stat-label">Providers Supported</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" style="-webkit-text-fill-color: var(--accent-amber); color: var(--accent-amber);">600+</div>
        <div class="stat-label">Tests Passing</div>
      </div>
    </div>
  </div>

  <!-- Cost Calculator -->
  <section class="section" id="calculator">
    <div class="section-header">
      <h2 class="section-title">Cost Calculator</h2>
      <p class="section-desc">See how much you'd save with your workload.</p>
    </div>

    <div class="calc-container">
      <div class="calc-controls">
        <div class="calc-control">
          <label>
            <span class="calc-label">Rows per request</span>
            <span class="calc-value" id="rowsValue">500</span>
          </label>
          <input type="range" id="rowsSlider" min="10" max="10000" value="500" step="10" class="calc-slider">
          <div class="calc-range"><span>10</span><span>10,000</span></div>
        </div>
        <div class="calc-control">
          <label>
            <span class="calc-label">Fields per row</span>
            <span class="calc-value" id="fieldsValue">12</span>
          </label>
          <input type="range" id="fieldsSlider" min="3" max="50" value="12" class="calc-slider">
          <div class="calc-range"><span>3</span><span>50</span></div>
        </div>
        <div class="calc-control">
          <label>
            <span class="calc-label">Requests per day</span>
            <span class="calc-value" id="rpdValue">1,000</span>
          </label>
          <input type="range" id="rpdSlider" min="100" max="100000" value="1000" step="100" class="calc-slider">
          <div class="calc-range"><span>100</span><span>100,000</span></div>
        </div>
        <div class="calc-control">
          <label>
            <span class="calc-label">Model</span>
          </label>
          <select id="modelSelect" class="calc-select">
            <option value="gpt4o" selected>GPT-4o ($2.50/1M)</option>
            <option value="gpt4o-mini">GPT-4o Mini ($0.15/1M)</option>
            <option value="claude35">Claude Sonnet 4 ($3.00/1M)</option>
            <option value="gemini25">Gemini 2.5 Flash ($0.30/1M)</option>
          </select>
        </div>
      </div>

      <div class="calc-results">
        <div class="calc-result-card bad-card">
          <div class="calc-result-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
            Without Contex (JSON)
          </div>
          <div class="calc-result-big" id="jsonCost">$2,280</div>
          <div class="calc-result-sub">per year</div>
          <div class="calc-result-detail"><span id="jsonTokens">24,960</span> tokens/request</div>
        </div>
        <div class="calc-result-card good-card">
          <div class="calc-result-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
              stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            With Contex
          </div>
          <div class="calc-result-big" id="contexCost">$1,552</div>
          <div class="calc-result-sub">per year</div>
          <div class="calc-result-detail"><span id="contexTokens">16,981</span> tokens/request</div>
        </div>
        <div class="calc-result-card savings-card">
          <div class="calc-result-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            You Save
          </div>
          <div class="calc-result-big savings-value" id="savedAmount">$728</div>
          <div class="calc-result-sub">per year (<span id="savedPercent">32</span>%)</div>
          <div class="calc-result-detail"><span id="savedTokens">7,979</span> tokens saved/request</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Before / After -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">The Token Problem</h2>
      <p class="section-desc">JSON wastes tokens on structure. Contex eliminates that waste with canonical
        representation.</p>
    </div>

    <div class="comparison-container">
      <div class="comp-col bad">
        <h4>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          JSON (39,605 tokens)
        </h4>
        <div class="code-block">
          <span class="key">{</span>
          <span class="val">"users"</span><span class="key">: [</span>
          <span class="key">{</span><span class="val">"id"</span><span class="key">:</span> 1<span class="key">,</span>
          <span class="val">"name"</span><span class="key">:</span> <span class="val">"Alice"</span><span
            class="key">,</span> <span class="val">"role"</span><span class="key">:</span> <span
            class="val">"admin"</span><span class="key">},</span>
          <span class="key">{</span><span class="val">"id"</span><span class="key">:</span> 2<span class="key">,</span>
          <span class="val">"name"</span><span class="key">:</span> <span class="val">"Bob"</span><span
            class="key">,</span> <span class="val">"role"</span><span class="key">:</span> <span
            class="val">"user"</span><span class="key">},</span>
          <span class="key">]</span>
          <span class="key">}</span>
          <span class="comment">// 60% is syntax overhead</span>
        </div>
      </div>
      <div class="comp-col good">
        <h4>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Contex Compact
        </h4>
        <div class="code-block">
          @0	id	name	role
          1	Alice	admin
          2	Bob	user
          <span class="comment">// Dictionary-compressed headers, tab-separated values.</span>
          <span class="comment">// 43% avg pipeline savings. Up to 94% on nested data.</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Core Features</h2>
      <p class="section-desc">What makes Contex different from other serialization libraries.</p>
    </div>

    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon blue">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
        </div>
        <h3>Canonical IR</h3>
        <p>TENS (Token Encoded Native Structure) is a deterministic, model-agnostic intermediate representation. Same
          data always produces the same output.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
        </div>
        <h3>40-94% Token Savings</h3>
        <p>Contex Compact format with dictionary compression. Avg 43% pipeline savings, up to 94% on deeply nested data. Verified across 15 dataset types.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon purple">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
        </div>
        <h3>Prefix Cache Friendly</h3>
        <p>Deterministic output ensures identical prompts produce identical tokens, maximizing provider-side prefix
          cache hits.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon amber">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
          </svg>
        </div>
        <h3>Multi-Provider Support</h3>
        <p>Drop-in middleware for OpenAI, Anthropic, and Google Gemini. Uses {{CONTEX:key}} placeholder syntax.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon blue">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 11a9 9 0 0 1 9 9"></path>
            <path d="M4 4a16 16 0 0 1 16 16"></path>
            <circle cx="5" cy="19" r="1"></circle>
          </svg>
        </div>
        <h3>Output Formats</h3>
        <p>Multiple output formats: Contex Compact, TOON (Token-Oriented Object Notation), CSV, Markdown, and JSON. Auto-selects the best per model and data shape.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <h3>TypeScript First</h3>
        <p>Full type safety with comprehensive TypeScript support. 600+ tests passing across 7 packages.</p>
      </div>
    </div>
  </section>

  <!-- How It Works — Visual Pipeline -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">How It Works</h2>
      <p class="section-desc">Contex is a token compiler. Three steps to cut your context costs.</p>
    </div>

    <div class="steps-grid">
      <div class="step-card">
        <div class="step-num">1</div>
        <h3>Encode</h3>
        <p>Your JSON/objects are encoded into a canonical intermediate representation (TENS). Same data always produces identical output — deterministic by design.</p>
        <div class="code-block" style="font-size: 12px; margin-top: 16px;">
          const tens = Tens.encode(data);
          tens.hash; // SHA-256 content hash
        </div>
      </div>
      <div class="step-card">
        <div class="step-num">2</div>
        <h3>Optimize</h3>
        <p>11 optimizations compress your data: dictionary encoding, field name shortening, deep flattening, boolean abbreviation, sparse mode, and more.</p>
        <div class="code-block" style="font-size: 12px; margin-top: 16px;">
          const text = tens.toString();
          // Contex Compact: 40-94% savings
        </div>
      </div>
      <div class="step-card">
        <div class="step-num">3</div>
        <h3>Inject</h3>
        <p>Middleware replaces <code>{{CONTEX:key}}</code> placeholders in your prompt with optimized output. Drop-in — zero prompt changes needed.</p>
        <div class="code-block" style="font-size: 12px; margin-top: 16px;">
          content: 'Analyze {{CONTEX:users}}'
          // → optimized Contex Compact
        </div>
      </div>
    </div>
  </section>

  <!-- Integrates With -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Works With Your Stack</h2>
      <p class="section-desc">Drop-in middleware for major LLM providers and frameworks. No lock-in.</p>
    </div>

    <div class="integrations-grid">
      <div class="integration-card">
        <div class="integration-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
        </div>
        <h4>OpenAI</h4>
        <p>GPT-4o, GPT-4o Mini</p>
        <span class="integration-tag">Middleware</span>
      </div>
      <div class="integration-card">
        <div class="integration-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        </div>
        <h4>Anthropic</h4>
        <p>Claude Sonnet 4, Opus</p>
        <span class="integration-tag">Middleware</span>
      </div>
      <div class="integration-card">
        <div class="integration-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/><line x1="12" y1="22" x2="12" y2="15.5"/><polyline points="22 8.5 12 15.5 2 8.5"/></svg>
        </div>
        <h4>Google Gemini</h4>
        <p>Gemini 2.5 Flash &amp; Pro</p>
        <span class="integration-tag">Middleware</span>
      </div>
      <div class="integration-card">
        <div class="integration-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
        </div>
        <h4>LangChain</h4>
        <p>Callback handler adapter</p>
        <span class="integration-tag">Adapter</span>
      </div>
      <div class="integration-card">
        <div class="integration-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
        </div>
        <h4>LlamaIndex</h4>
        <p>Node postprocessor adapter</p>
        <span class="integration-tag">Adapter</span>
      </div>
      <div class="integration-card">
        <div class="integration-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
        </div>
        <h4>CLI</h4>
        <p>Analyze, bench, materialize</p>
        <span class="integration-tag">Tooling</span>
      </div>
    </div>
  </section>

  <!-- Code Tabs — Provider Examples -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">3 Lines to Ship</h2>
      <p class="section-desc">Pick your provider. Wrap your client. Replace JSON with a placeholder. Done.</p>
    </div>

    <div class="code-tabs-container">
      <div class="code-tabs">
        <button class="code-tab active" data-tab="openai">OpenAI</button>
        <button class="code-tab" data-tab="anthropic">Anthropic</button>
        <button class="code-tab" data-tab="gemini">Gemini</button>
      </div>
      <div class="code-tab-content active" id="tab-openai">
        <div class="code-block" style="text-align: left; white-space: pre; line-height: 1.7;">import { createContexOpenAI } from '@contex/middleware';

<span class="key">// 1. Wrap your client</span>
const client = createContexOpenAI(new OpenAI(), {
  data: { users: myData }      <span class="key">// 2. Register data</span>
});

<span class="key">// 3. Use placeholder — middleware handles the rest</span>
const res = await client.chat.completions.create({
  model: 'gpt-4o',
  messages: [{ role: 'user',
    content: 'Summarize {{CONTEX:users}}' }]
});</div>
      </div>
      <div class="code-tab-content" id="tab-anthropic">
        <div class="code-block" style="text-align: left; white-space: pre; line-height: 1.7;">import { createContexAnthropic } from '@contex/middleware';

<span class="key">// Anthropic — auto cache_control breakpoints</span>
const client = createContexAnthropic(new Anthropic(), {
  data: { context: kbData }
});

const msg = await client.messages.create({
  model: 'claude-sonnet-4-20250514',
  max_tokens: 1024,
  messages: [{ role: 'user',
    content: 'Answer using {{CONTEX:context}}' }]
});</div>
      </div>
      <div class="code-tab-content" id="tab-gemini">
        <div class="code-block" style="text-align: left; white-space: pre; line-height: 1.7;">import { createContexGemini } from '@contex/middleware';

const client = createContexGemini(genai, {
  data: { documents: docsData }
});

const result = await client.models.generateContent({
  model: 'gemini-2.5-flash',
  contents: 'Summarize {{CONTEX:documents}}'
});</div>
      </div>
    </div>
  </section>

  <!-- Use Cases -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Built for Real Workloads</h2>
      <p class="section-desc">Teams use Contex wherever structured data meets LLM context windows.</p>
    </div>

    <div class="use-cases-grid">
      <div class="use-case-card">
        <div class="use-case-icon" style="color: var(--accent-blue);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
        </div>
        <h4>RAG Pipelines</h4>
        <p>Stuff 3× more retrieved documents into your context window. Dictionary compression shines when chunks share vocabulary.</p>
        <span class="use-case-stat">68% savings on document data</span>
      </div>
      <div class="use-case-card">
        <div class="use-case-icon" style="color: var(--accent-green);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
        </div>
        <h4>Customer Support</h4>
        <p>Feed ticket history, user profiles, and product data to your agent. Repetitive fields like status and priority compress heavily.</p>
        <span class="use-case-stat">Tested on real support ticket data</span>
      </div>
      <div class="use-case-card">
        <div class="use-case-icon" style="color: var(--accent-purple);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
        </div>
        <h4>Analytics &amp; Dashboards</h4>
        <p>Send database query results directly as context. Deep flattening handles nested aggregations — up to 94% format-level savings.</p>
        <span class="use-case-stat">94% savings on deeply nested data</span>
      </div>
      <div class="use-case-card">
        <div class="use-case-icon" style="color: var(--accent-amber);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        </div>
        <h4>Compliance &amp; Audit</h4>
        <p>Deterministic output means identical tokens every time — maximizing prefix cache hits and ensuring reproducible responses.</p>
        <span class="use-case-stat">100% cache hit rate</span>
      </div>
    </div>
  </section>

  <!-- Architecture -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Package Architecture</h2>
      <p class="section-desc">A modular monorepo. Install only what you need.</p>
    </div>

    <div class="comparison-container">
      <div class="comp-col" style="border-left: 2px solid var(--accent-blue);">
        <h4>The Pipeline</h4>
        <div class="code-block" style="line-height: 2;">
          <b>Input:</b> Your Data (JSON, objects)
          ↓
          <b>Encode:</b> Tens.encode(data) → Canonical IR
          ↓
          <b>Materialize:</b> tens.materialize('gpt-4o') → Tokens
          ↓
          <b>Inject:</b> Middleware replaces {{CONTEX:key}}
          ↓
          <b>Output:</b> Optimized prompt → LLM
        </div>
      </div>
      <div class="comp-col" style="border-left: 2px solid var(--accent-green);">
        <h4>Package Structure</h4>
        <div class="code-block" style="line-height: 2;">
          <b>@contex/core</b> — IR encoder, formats, tokenizer
          ↓
          <b>@contex/engine</b> — Budget, quick(), auto-select
          ↓
          <b>@contex/middleware</b> — SDK wrappers
          ↓
          <b>@contex/adapters</b> — LangChain, LlamaIndex
          ↓
          <b>@contex/cli</b> — CLI tools, benchmarks
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Frequently Asked Questions</h2>
      <p class="section-desc">Common questions about Contex.</p>
    </div>

    <div class="faq-list">
      <details class="faq-item">
        <summary class="faq-question">How does Contex reduce tokens?</summary>
        <div class="faq-answer">Contex applies 11 optimizations: dictionary compression (repeated values become <code>@0</code>, <code>@1</code>), field name shortening, deep flattening of nested objects, boolean abbreviation (<code>true</code> → <code>T</code>), null shortening (<code>null</code> → <code>_</code>), integer normalization, tab-separated schema (declared once), array compaction, sparse mode for mostly-null data, numeric deduplication, and elimination of all JSON syntax (no brackets, quotes, colons, or commas).</div>
      </details>
      <details class="faq-item">
        <summary class="faq-question">Can the LLM still understand the compressed format?</summary>
        <div class="faq-answer">Yes. Contex Compact is plain text with a self-describing header. The <code>@f</code> line maps short field names to full names, and the <code>@d</code> line defines the dictionary. Modern LLMs (GPT-4o, Claude, Gemini) parse this trivially — the format is simpler than JSON, not more complex. The schema is declared once and each row is a tab-separated line.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-question">What's the difference between TENS, TENS-Text, and Contex Compact?</summary>
        <div class="faq-answer">They're three layers of the same pipeline, not competing formats. <strong>TENS Binary</strong> is the internal IR (<code>Uint8Array</code> with a SHA-256 hash) — for storage and deduplication. <strong>TENS-Text</strong> (<code>.tens</code>) is a human-readable serialization for debugging/inspection. <strong>Contex Compact</strong> is the optimized output you send to LLMs — 40-94% savings. Think of it like a compiler: source → object file → executable.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-question">Does Contex work with streaming responses?</summary>
        <div class="faq-answer">Yes. Contex compresses the <em>prompt</em> (input context), not the LLM response. Once the middleware replaces <code>{{CONTEX:key}}</code> with optimized data, the API call proceeds normally — including streaming. You get the same response, just with fewer input tokens.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-question">When should I NOT use Contex?</summary>
        <div class="faq-answer">Skip Contex for: free-text/unstructured data (no structure to optimize), fewer than 5 rows (header overhead not worth it), data where the LLM needs to output structured JSON (LLMs parse JSON natively), or datasets with 100% unique string values (no dictionary opportunity). For everything else — especially repetitive, nested, or large datasets — Contex delivers significant savings.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-question">Is Contex production-ready?</summary>
        <div class="faq-answer">Yes. 600+ tests across 7 packages, 47 edge-case tests covering unicode, sparse data, nested structures, and crash safety. 20/20 data fidelity (100% lossless roundtrip). Benchmark v7 verified across 15 dataset types. MIT licensed.</div>
      </details>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta-box">
    <h2>Start saving tokens today</h2>
    <p>Drop-in middleware. Three lines of code. Immediate cost reduction.</p>
    <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
      <a href="./docs.html" class="btn btn-primary">Read Documentation</a>
      <a href="./playground.html" class="btn btn-ghost">Try Playground</a>
      <a href="https://github.com/kshitijpalsinghtomar/contex" class="btn btn-ghost" target="_blank">View on GitHub</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <p>MIT © <a href="https://github.com/kshitijpalsinghtomar/contex">Contex</a> · Built for production LLM
      pipelines</p>
  </footer>

  <script>
    // Theme Toggle
    const toggleBtn = document.getElementById('theme-toggle');
    const sunIcon = toggleBtn.querySelector('.sun-icon');
    const moonIcon = toggleBtn.querySelector('.moon-icon');

    function updateIcon() {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      sunIcon.style.display = isDark ? 'none' : 'block';
      moonIcon.style.display = isDark ? 'block' : 'none';
      toggleBtn.style.color = isDark ? 'var(--text-muted)' : 'var(--accent-amber)';
    }
    updateIcon();

    toggleBtn.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('contex-theme', next);
      updateIcon();
    });

    document.getElementById('installCmd')?.addEventListener('click', () => {
      navigator.clipboard.writeText('pnpm add @contex/core @contex/engine @contex/middleware');
      const icon = document.querySelector('#installCmd .copy-icon');
      if (icon) {
        icon.style.opacity = '1';
        icon.style.color = 'var(--accent-green)';
        setTimeout(() => { icon.style.opacity = '0.6'; icon.style.color = ''; }, 2000);
      }
    });

    // Cost Calculator
    const MODELS = {
      "gpt4o": { price: 2.50, savings: 0.43 },
      "gpt4o-mini": { price: 0.15, savings: 0.43 },
      "claude35": { price: 3.00, savings: 0.43 },
      "gemini25": { price: 0.30, savings: 0.43 },
    };

    const JSON_TOKENS_PER_FIELD = 5;

    function updateCalc() {
      const rows = +document.getElementById('rowsSlider').value;
      const fields = +document.getElementById('fieldsSlider').value;
      const rpd = +document.getElementById('rpdSlider').value;
      const modelId = document.getElementById('modelSelect').value;
      const model = MODELS[modelId];

      const jsonTokens = rows * fields * JSON_TOKENS_PER_FIELD;
      const texTokens = Math.round(jsonTokens * (1 - model.savings));
      const savedTokens = jsonTokens - texTokens;

      const jsonAnnual = (jsonTokens / 1e6) * model.price * rpd * 365;
      const texAnnual = (texTokens / 1e6) * model.price * rpd * 365;
      const savedAnnual = jsonAnnual - texAnnual;
      const savedPct = Math.round((savedAnnual / jsonAnnual) * 100);

      document.getElementById('rowsValue').textContent = rows.toLocaleString();
      document.getElementById('fieldsValue').textContent = fields.toLocaleString();
      document.getElementById('rpdValue').textContent = rpd.toLocaleString();
      document.getElementById('jsonTokens').textContent = jsonTokens.toLocaleString();
      document.getElementById('contexTokens').textContent = texTokens.toLocaleString();
      document.getElementById('savedTokens').textContent = savedTokens.toLocaleString();
      document.getElementById('jsonCost').textContent = '$' + Math.round(jsonAnnual).toLocaleString();
      document.getElementById('contexCost').textContent = '$' + Math.round(texAnnual).toLocaleString();
      document.getElementById('savedAmount').textContent = '$' + Math.round(savedAnnual).toLocaleString();
      document.getElementById('savedPercent').textContent = savedPct;
    }

    ['rowsSlider', 'fieldsSlider', 'rpdSlider', 'modelSelect'].forEach(id => {
      document.getElementById(id).addEventListener('input', updateCalc);
    });
    updateCalc();

    // Code Tabs
    document.querySelectorAll('.code-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.code-tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
      });
    });

    // Scroll Reveal
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }});
    }, { threshold: 0.1 });
    document.querySelectorAll('.section, .cta-box').forEach(el => { el.classList.add('reveal'); observer.observe(el); });
  </script>
</body>

</html>