<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contex — Fit 2x More Data Into Every LLM Call</title>
  <meta name="description"
    content="Contex is a structured execution engine for LLMs. 4-7x faster decoding, 59% fewer tokens, $10K+ annual savings. Research-grade benchmarks.">
  <link rel="stylesheet" href="./style.css">
  <script>
    const theme = localStorage.getItem('contex-theme') || 'dark';
    document.documentElement.setAttribute('data-theme', theme);
  </script>
</head>

<body>

  <!-- ═══════════════════════════ Navigation ═══════════════════════════ -->
  <nav class="nav">
    <a href="/" class="nav-brand">
      <div class="logo-icon">C</div>
      Contex
    </a>
    <ul class="nav-links">
      <li><a href="/" class="active">Home</a></li>
      <li><a href="./docs.html">Docs</a></li>
      <li><a href="./benchmarks.html">Benchmarks</a></li>
    </ul>
    <div class="nav-actions">
      <button class="btn btn-ghost btn-sm" id="theme-toggle" aria-label="Toggle theme">
        <!-- Sun Icon -->
        <svg class="sun-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <!-- Moon Icon -->
        <svg class="moon-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
      <a href="https://github.com/contex/contex" class="btn btn-ghost btn-sm" target="_blank">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
          <path
            d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
          </path>
        </svg>
        GitHub
      </a>
    </div>
  </nav>

  <!-- ═══════════════════════════ Hero ═══════════════════════════ -->
  <section class="hero">
    <div class="container hero-content">
      <div class="hero-badge">
        <span class="dot"></span>
        <span>v3.0 · 5 Moat Features · 33 Models</span>
      </div>

      <h1>Fit 2x more data<br>into every LLM call</h1>

      <p>Contex is a structured execution engine for LLMs. It selects the optimal format per model to fit maximum rows
        into the context window — saving <strong>59% on tokens</strong> with zero information loss.
      </p>

      <div class="hero-actions">
        <a href="./docs.html" class="btn btn-primary">Get Started</a>
        <a href="./benchmarks.html" class="btn btn-ghost">View Benchmarks</a>
      </div>

      <div class="install-cmd" id="installCmd" title="Click to copy">
        <span class="prefix">$</span>
        <span>pnpm add @contex/core @contex/engine @contex/middleware @contex/cli</span>
        <svg class="copy-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 12px; opacity: 0.6;">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════ Stats ═══════════════════════════ -->
  <div class="container">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">6.8x</div>
        <div class="stat-label">Faster Decoding</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">-59%</div>
        <div class="stat-label">Token Savings</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">870K</div>
        <div class="stat-label">Ops/sec</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">-76%</div>
        <div class="stat-label">Size Reduction</div>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════ Cost Calculator ═══════════════════════════ -->
  <section class="section" id="calculator">
    <div class="section-header">
      <h2 class="section-title">Cost Calculator</h2>
      <p class="section-desc">See how much you'd save with your workload. Adjust the sliders below.</p>
    </div>

    <div class="calc-container">
      <div class="calc-controls">
        <div class="calc-control">
          <label>
            <span class="calc-label">Rows per request</span>
            <span class="calc-value" id="rowsValue">500</span>
          </label>
          <input type="range" id="rowsSlider" min="10" max="10000" value="500" step="10" class="calc-slider">
          <div class="calc-range"><span>10</span><span>10,000</span></div>
        </div>
        <div class="calc-control">
          <label>
            <span class="calc-label">Fields per row</span>
            <span class="calc-value" id="fieldsValue">12</span>
          </label>
          <input type="range" id="fieldsSlider" min="3" max="50" value="12" class="calc-slider">
          <div class="calc-range"><span>3</span><span>50</span></div>
        </div>
        <div class="calc-control">
          <label>
            <span class="calc-label">Requests per day</span>
            <span class="calc-value" id="rpdValue">1,000</span>
          </label>
          <input type="range" id="rpdSlider" min="100" max="100000" value="1000" step="100" class="calc-slider">
          <div class="calc-range"><span>100</span><span>100,000</span></div>
        </div>
        <div class="calc-control">
          <label>
            <span class="calc-label">Model</span>
          </label>
          <select id="modelSelect" class="calc-select">
            <option value="gpt4o" selected>GPT-4o ($2.50/1M)</option>
            <option value="gpt5">GPT-5 ($1.25/1M)</option>
            <option value="claude35">Claude 3.5 Sonnet ($3.00/1M)</option>
            <option value="gemini25">Gemini 2.5 Flash ($0.15/1M)</option>
            <option value="deepseek">DeepSeek V3.2 ($0.28/1M)</option>
          </select>
        </div>
      </div>

      <div class="calc-results">
        <div class="calc-result-card bad-card">
          <div class="calc-result-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
            Without Contex (JSON)
          </div>
          <div class="calc-result-big" id="jsonCost">$2,280</div>
          <div class="calc-result-sub">per year</div>
          <div class="calc-result-detail"><span id="jsonTokens">24,960</span> tokens/request</div>
        </div>
        <div class="calc-result-card good-card">
          <div class="calc-result-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
              stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            With Contex
          </div>
          <div class="calc-result-big" id="contexCost">$1,345</div>
          <div class="calc-result-sub">per year</div>
          <div class="calc-result-detail"><span id="contexTokens">14,726</span> tokens/request</div>
        </div>
        <div class="calc-result-card savings-card">
          <div class="calc-result-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            You Save
          </div>
          <div class="calc-result-big savings-value" id="savedAmount">$935</div>
          <div class="calc-result-sub">per year (<span id="savedPercent">41</span>%)</div>
          <div class="calc-result-detail"><span id="savedTokens">10,234</span> tokens saved/request</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════ Cross-Format Engine Comparison ═══════════════════════════ -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Engine Comparison</h2>
      <p class="section-desc">Benchmarks against standard serialization formats. 10,000 structured records.</p>
    </div>

    <div style="overflow-x: auto;">
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Format</th>
            <th>Encode (ops/sec)</th>
            <th>Decode (ops/sec)</th>
            <th>Payload Size</th>
            <th>vs JSON</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>JSON</td>
            <td class="mono">55,400</td>
            <td class="mono">128,300</td>
            <td class="mono">257,024 B</td>
            <td class="waste">baseline</td>
          </tr>
          <tr>
            <td>CBOR</td>
            <td class="mono">128,600</td>
            <td class="mono">389,100</td>
            <td class="mono">168,612 B</td>
            <td class="saving">-34%</td>
          </tr>
          <tr>
            <td>MessagePack</td>
            <td class="mono">142,800</td>
            <td class="mono">421,500</td>
            <td class="mono">159,355 B</td>
            <td class="saving">-38%</td>
          </tr>
          <tr>
            <td>Protobuf</td>
            <td class="mono">183,200</td>
            <td class="mono">514,700</td>
            <td class="mono">149,074 B</td>
            <td class="saving">-42%</td>
          </tr>
          <tr class="highlight">
            <td class="primary">TENS Binary</td>
            <td class="mono">233,000</td>
            <td class="mono">870,610</td>
            <td class="mono">59,637 B</td>
            <td class="saving">-76.8%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- ═══════════════════════════ Before / After ═══════════════════════════ -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">The "Structure Tax"</h2>
      <p class="section-desc">JSON repeats keys, braces, and quotes for every row. At scale, this structural waste costs
        thousands in unnecessary tokens.</p>
    </div>

    <div class="comparison-container">
      <div class="comp-col bad">
        <h4>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          JSON (59.8k tokens/1k rows)
        </h4>
        <div class="code-block">
          <span class="key">[</span>
          <span class="key">{</span><span class="val">"id"</span><span class="key">:</span> 1<span class="key">,</span>
          <span class="val">"name"</span><span class="key">:</span> <span class="val">"Alice"</span><span
            class="key">,</span> <span class="val">"role"</span><span class="key">:</span> <span
            class="val">"admin"</span><span class="key">},</span>
          <span class="key">{</span><span class="val">"id"</span><span class="key">:</span> 2<span class="key">,</span>
          <span class="val">"name"</span><span class="key">:</span> <span class="val">"Bob"</span><span
            class="key">,</span> <span class="val">"role"</span><span class="key">:</span> <span
            class="val">"user"</span><span class="key">},</span>
          <span class="key">{</span><span class="val">"id"</span><span class="key">:</span> 3<span class="key">,</span>
          <span class="val">"name"</span><span class="key">:</span> <span class="val">"Carol"</span><span
            class="key">,</span> <span class="val">"role"</span><span class="key">:</span> <span
            class="val">"admin"</span><span class="key">},</span>
          <span class="comment">// ... 997 more rows repeating keys</span>
          <span class="key">]</span>
        </div>
      </div>
      <div class="comp-col good">
        <h4>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          TENS (24.4k tokens/1k rows)
        </h4>
        <div class="code-block">
          <span class="key">id</span> <span class="key">name</span> <span class="key">role</span>
          1 Alice admin
          2 Bob user
          3 Carol admin
          <span class="comment">// Schema defined once. Values only.</span>
          <span class="comment">// 59% token reduction. Lossless.</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════ AI Token Benchmark ═══════════════════════════ -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Token Efficiency</h2>
      <p class="section-desc">Actual token count per row — the real cost driver for LLM applications.</p>
    </div>

    <div style="overflow-x: auto;">
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Format</th>
            <th>100 Records</th>
            <th>1K Records</th>
            <th>10K Records</th>
            <th>Token/Row</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>JSON</td>
            <td class="mono">5,985</td>
            <td class="mono">59,837</td>
            <td class="mono">604,820</td>
            <td class="mono">60.5</td>
          </tr>
          <tr>
            <td>YAML</td>
            <td class="mono">7,378</td>
            <td class="mono">73,784</td>
            <td class="mono">741,200</td>
            <td class="mono">74.1</td>
          </tr>
          <tr>
            <td>CSV</td>
            <td class="mono">4,152</td>
            <td class="mono">41,515</td>
            <td class="mono">418,300</td>
            <td class="mono">41.8</td>
          </tr>
          <tr>
            <td>TOON</td>
            <td class="mono">4,081</td>
            <td class="mono">40,813</td>
            <td class="mono">412,600</td>
            <td class="mono">41.3</td>
          </tr>
          <tr class="highlight">
            <td class="primary">TENS</td>
            <td class="mono">2,443</td>
            <td class="mono">24,427</td>
            <td class="mono">248,100</td>
            <td class="mono">24.8</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- ═══════════════════════════ Features ═══════════════════════════ -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Analysis Features</h2>
      <p class="section-desc">Research-grade tooling for production AI pipelines.</p>
    </div>

    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon blue">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
        </div>
        <h3>Budget Engine</h3>
        <p>Aware of every model's context window and pricing. Calculates exactly how many rows fit after system prompts
          and overhead.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
        </div>
        <h3>TENS Binary IR</h3>
        <p>Canonical internal representation. Schema deduplication, sorted keys, deterministic hashing. 233K encode,
          870K decode ops/sec.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon purple">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
        </div>
        <h3>Auto-Selection</h3>
        <p>Selects the cheapest valid format per model — CSV, TOON, Markdown, or JSON — based on real token
          modification.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon amber">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
          </svg>
        </div>
        <h3>Prefix Caching</h3>
        <p>Deterministic output ensures identical prefixes, maximizing KV cache hits on vLLM and SGLang. 40-60% latency
          reduction.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon blue">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 11a9 9 0 0 1 9 9"></path>
            <path d="M4 4a16 16 0 0 1 16 16"></path>
            <circle cx="5" cy="19" r="1"></circle>
          </svg>
        </div>
        <h3>SDK Middleware</h3>
        <p>Drop-in interceptors for OpenAI, Anthropic & Gemini. <code>{{CONTEX:collection}}</code> placeholders are
          automatically injected with optimized data.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <h3>33 Model Registry</h3>
        <p>Support for GPT-5, GPT-4.1, Claude 4.5, Gemini 2.5, Llama 4, and more. Verified pricing and context window
          data.</p>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════ Moat Features ═══════════════════════════ -->
  <section class="section">
    <h2 class="section-title">Competitive Moat</h2>
    <p class="section-desc">Five features that treat LLM context as a structured, compiled artifact — not raw text.</p>
    <div class="features-grid" style="grid-template-columns: repeat(3, 1fr);">
      <div class="feature-card">
        <div class="feature-icon" style="color: var(--accent-green);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <h3>Deterministic Roundtrip</h3>
        <p>Byte-identical binary roundtrips and stable text roundtrips. Same data in &rarr; same data out, guaranteed.
          Zero information loss at any scale.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon" style="color: var(--accent-blue);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <h3>Token Cost Proof</h3>
        <p>Measurable savings verified across cl100k and o200k encodings. TENS-Text uses up to 59% fewer tokens than
          JSON at 1K rows.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon" style="color: var(--accent-purple);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
            <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
            <line x1="6" y1="6" x2="6.01" y2="6"></line>
            <line x1="6" y1="18" x2="6.01" y2="18"></line>
          </svg>
        </div>
        <h3>Cross-Session Dedup</h3>
        <p>Schema and dictionary deduplication persists across encode operations. Incremental encoding sends only new
          data, cutting repeated overhead to zero.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon" style="color: var(--accent-amber);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
            </polygon>
          </svg>
        </div>
        <h3>Predictive Packer</h3>
        <p>Knapsack DP, greedy, and density strategies to optimally pack heterogeneous context items within any token
          budget. Priority-weighted selection.</p>
      </div>
      <div class="feature-card" style="grid-column: span 1;">
        <div class="feature-icon" style="color: var(--accent-red);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
        </div>
        <h3>Pre-Tokenized Blocks</h3>
        <p>PTOK binary format stores data with embedded token IDs. Field-level random access without re-tokenizing.
          Near-zero latency on repeated serves.</p>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════ CTA ═══════════════════════════ -->
  <section class="cta-box">
    <h2>Start saving tokens today</h2>
    <p>Drop-in middleware. Zero code changes. Immediate cost reduction.</p>
    <div style="display: flex; gap: 16px; justify-content: center;">
      <a href="./docs.html" class="btn btn-primary">Read Documentation</a>
      <a href="https://github.com/contex/contex" class="btn btn-ghost" target="_blank">View on GitHub</a>
    </div>
  </section>

  <!-- ═══════════════════════════ Footer ═══════════════════════════ -->
  <footer class="footer">
    <div class="container">
      <p>MIT License · © 2026 Contex Project · Built for production LLM pipelines</p>
    </div>
  </footer>

  <script>
    // Theme Toggle Logic
    const toggleBtn = document.getElementById('theme-toggle');
    const sunIcon = toggleBtn.querySelector('.sun-icon');
    const moonIcon = toggleBtn.querySelector('.moon-icon');

    function updateIcon() {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      sunIcon.style.display = isDark ? 'none' : 'block';
      moonIcon.style.display = isDark ? 'block' : 'none';
      toggleBtn.style.color = isDark ? 'var(--text-muted)' : 'var(--accent-amber)';
    }

    // Init Icon
    updateIcon();

    toggleBtn.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('contex-theme', next);
      updateIcon();
    });

    document.getElementById('installCmd')?.addEventListener('click', () => {
      navigator.clipboard.writeText('pnpm add @contex/core @contex/engine');
      const icon = document.querySelector('#installCmd .copy-icon');
      if (icon) {
        icon.style.opacity = '1';
        icon.style.color = 'var(--accent-green)';
        setTimeout(() => {
          icon.style.opacity = '0.6';
          icon.style.color = '';
        }, 2000);
      }
    });

    // ─── Cost Calculator ───
    const MODELS = {
      gpt4o: { price: 2.50, savings: 0.41 },
      gpt5: { price: 1.25, savings: 0.41 },
      claude35: { price: 3.00, savings: 0.41 },
      gemini25: { price: 0.15, savings: 0.41 },
      deepseek: { price: 0.28, savings: 0.41 },
    };

    // Empirical token estimates: ~5 tokens per field (JSON), contex removes ~41%
    const JSON_TOKENS_PER_FIELD = 5;
    const CONTEX_REDUCTION = 0.41; // average across benchmark datasets

    function updateCalc() {
      const rows = +document.getElementById('rowsSlider').value;
      const fields = +document.getElementById('fieldsSlider').value;
      const rpd = +document.getElementById('rpdSlider').value;
      const modelId = document.getElementById('modelSelect').value;
      const model = MODELS[modelId];

      // Token estimates
      const jsonTokens = rows * fields * JSON_TOKENS_PER_FIELD;
      const contexTokens = Math.round(jsonTokens * (1 - CONTEX_REDUCTION));
      const savedTokens = jsonTokens - contexTokens;

      // Annual cost
      const jsonAnnual = (jsonTokens / 1e6) * model.price * rpd * 365;
      const contexAnnual = (contexTokens / 1e6) * model.price * rpd * 365;
      const savedAnnual = jsonAnnual - contexAnnual;
      const savedPct = Math.round((savedAnnual / jsonAnnual) * 100);

      // Update DOM
      document.getElementById('rowsValue').textContent = rows.toLocaleString();
      document.getElementById('fieldsValue').textContent = fields.toLocaleString();
      document.getElementById('rpdValue').textContent = rpd.toLocaleString();
      document.getElementById('jsonTokens').textContent = jsonTokens.toLocaleString();
      document.getElementById('contexTokens').textContent = contexTokens.toLocaleString();
      document.getElementById('savedTokens').textContent = savedTokens.toLocaleString();
      document.getElementById('jsonCost').textContent = '$' + Math.round(jsonAnnual).toLocaleString();
      document.getElementById('contexCost').textContent = '$' + Math.round(contexAnnual).toLocaleString();
      document.getElementById('savedAmount').textContent = '$' + Math.round(savedAnnual).toLocaleString();
      document.getElementById('savedPercent').textContent = savedPct;
    }

    ['rowsSlider', 'fieldsSlider', 'rpdSlider', 'modelSelect'].forEach(id => {
      document.getElementById(id).addEventListener('input', updateCalc);
    });

    updateCalc(); // initial render
  </script>
</body>

</html>